{% extends 'layout.html' %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<h2>Admin Dashboard</h2>
<hr>
<div>
    <div class="row">
        <div class="col md-12">
            <div class="rentalist">
                <h4>Rental History</h4>
                <hr>
                <table id="myTable" class="table">
                    <thead class="thead">
                        <tr>
                          <th scope="col">Booking id</th>
                          <th scope="col">Car id</th>
                          <th scope="col">Car</th>
                          <th scope="col">Color</th>
                          <th scope="col">Cost/Hr</th>
                          <th scope="col">From</th>
                          <th scope="col">To</th>
                        </tr>
                      </thead>
                      <tbody>
                      {% for booking in bookings: %}
                        <tr>
                          <td>{{ booking['bookingid'] }}</td>
                          <td>{{ booking['car']['carid'] }}</td>
                          <td>{{ booking['car']['make'] }}</td>
                          <td>{{ booking['car']['color'] }}</td>
                          <td>${{ booking['car']['costperhour'] }}</td>
                          <td>{{ booking['fromdate'] }}</td>
                          <td>{{ booking['todate'] }}</td>
                        </tr>
                      {% endfor %}
                      </tbody>
                </table>
            </div>


            <div class="carlist" style="margin-top: 50px;">
                <h4>List of Cars</h4>
                <hr>
                <button>Add new car</button>
                <table id="myTable" class="table">
                    <thead>
                        <tr>
                            <th scope="col">Car id</th>
                            <th scope="col">make</th>
                            <th scope="col">bodytype</th>
                            <th scope="col">color</th>
                            <th scope="col">seats</th>
                            <th scope="col">edit</th>
                            <th scope="col">report</th>
                            <th scope="col">delete</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for car in cars: %}
                        <tr>
                            <td>{{ car['carid'] }}</td>
                            <td>{{ car['make'] }}</td>
                            <td>{{ car['bodytype'] }}</td>
                            <td>{{ car['color'] }}</td>
                            <td>{{ car['seats'] }}</td>
                            <td>
                                <form action="{{ url_for('site.carbooking') }}" method="post">
                                    <input type="hidden" name="carid" id="carid" value="{{ car['carid'] }}" >
                                    <input type="submit" value="edit" />
                                </form>                                
                            </td>
                            <td>
                                <form action="{{ url_for('site.carbooking') }}" method="post">
                                    <input type="hidden" name="carid" id="carid" value="{{ car['carid'] }}" >
                                    <input type="submit" value="report" />
                                </form>
                            </td>
                            <td>
                                <form action="{{ url_for('site.carbooking') }}" method="post">
                                    <input type="hidden" name="carid" id="carid" value="{{ car['carid'] }}" >
                                    <input type="submit" value="delete" />
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <div class="userlist" style="margin-top: 50px;">
                <h4>List of Users</h4>
                <hr>
                <button>Add new user</button>
                <table id="myTable" class="table">
                    <thead>
                        <tr>
                            <th scope="col">user id</th>                            
                            <th scope="col">first name</th>
                            <th scope="col">last name</th>
                            <th scope="col">role</th>
                            <th scope="col"></th>
                            <th scope="col"></th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for user in users: %}
                        <tr>
                            <td>{{ user['userid'] }}</td>
                            <td>{{ user['fname'] }}</td>
                            <td>{{ user['lname'] }}</td>
                            <td>{{ user['role'] }}</td>
                            <td>
                                <form action="{{ url_for('site.carbooking') }}" method="post">
                                    <input type="hidden" name="userid" id="userid" value="{{ user['userid'] }}" >
                                    <input type="submit" value="edit" />
                                </form>                                
                            </td>
                            <td>
                                <form action="{{ url_for('site.carbooking') }}" method="post">
                                    <input type="hidden" name="userid" id="userid" value="{{ user['userid'] }}" >
                                    <input type="submit" value="delete" />
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <script>
                $(document).ready(function () {
                    $('.table').DataTable({
                        "autoFill": true,
                        "scrollY":        "250px",
                        "scrollCollapse": true,
                        "paging":         false
                    });
                });

            </script>
{% endblock %}